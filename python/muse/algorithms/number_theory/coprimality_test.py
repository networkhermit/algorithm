from collections.abc import Callable

from muse.algorithms.number_theory import coprimality, tests
from muse.util import test_runner

sample = [
    {"m": 0, "n": 1, "category": True},
    {"m": 1, "n": 0, "category": True},
    {"m": 1, "n": 1, "category": True},
    {"m": -1, "n": -1, "category": True},
    {"m": 15, "n": -45, "category": False},
    {"m": -7, "n": 51, "category": True},
    {"m": -3, "n": 75, "category": False},
    {"m": -84, "n": -32, "category": False},
    {"m": -21, "n": -71, "category": True},
    {"m": 89, "n": -11, "category": True},
    {"m": -40, "n": -9, "category": True},
    {"m": 92, "n": 26, "category": False},
    {"m": 14, "n": -95, "category": True},
    {"m": 5, "n": -99, "category": True},
    {"m": -45, "n": -57, "category": False},
    {"m": 59, "n": -97, "category": True},
    {"m": -16, "n": 37, "category": True},
    {"m": 97, "n": 49, "category": True},
    {"m": 5998, "n": -3871, "category": True},
    {"m": -2152, "n": -2909, "category": True},
    {"m": 8823, "n": 629, "category": False},
    {"m": 7589, "n": -7035, "category": True},
    {"m": -8669, "n": 6398, "category": True},
    {"m": 1059, "n": 3522, "category": False},
    {"m": 9892, "n": -2990, "category": False},
    {"m": -1819, "n": 4740, "category": True},
    {"m": 7900, "n": -7244, "category": False},
    {"m": 8072, "n": -1226, "category": False},
    {"m": -6875, "n": 5777, "category": True},
    {"m": -828, "n": 8859, "category": False},
    {"m": -3929, "n": 1143, "category": True},
    {"m": -5397, "n": 1880, "category": True},
    {"m": -9397, "n": -4343, "category": True},
    {"m": 2389, "n": -4026, "category": True},
    {"m": -6838, "n": -7802, "category": False},
    {"m": -6118, "n": 7944, "category": False},
    {"m": 1408, "n": -8483, "category": True},
    {"m": -507, "n": 3510, "category": False},
    {"m": 5030, "n": -4818, "category": False},
    {"m": 2563, "n": -1867, "category": True},
    {"m": 3317, "n": -4585, "category": True},
    {"m": -2448, "n": -2215, "category": True},
    {"m": -1982, "n": -3811, "category": True},
    {"m": 645, "n": 7907, "category": True},
    {"m": 5812, "n": 1657, "category": True},
    {"m": 3944, "n": -5997, "category": True},
    {"m": -2410, "n": -6522, "category": False},
    {"m": 4565, "n": 9055, "category": False},
    {"m": 8478, "n": 1099, "category": False},
    {"m": 6444, "n": -7298, "category": False},
    {"m": 7606, "n": -7006, "category": False},
    {"m": 2491, "n": -2017, "category": True},
    {"m": 7151, "n": -9724, "category": True},
    {"m": 2958, "n": -5697, "category": False},
    {"m": 5134, "n": -7701, "category": False},
    {"m": -3544, "n": 9042, "category": False},
    {"m": 8826, "n": -4548, "category": False},
    {"m": 6794, "n": -5322, "category": False},
    {"m": -6906, "n": 7502, "category": False},
    {"m": 172, "n": 8480, "category": False},
    {"m": 8244, "n": 4622, "category": False},
    {"m": -7315, "n": 5253, "category": True},
    {"m": 7011, "n": 4285, "category": True},
    {"m": -3132, "n": -4999, "category": True},
    {"m": -7332, "n": -655, "category": True},
    {"m": 9661, "n": -1750, "category": True},
    {"m": 7560, "n": -3128, "category": False},
    {"m": 1334, "n": 6234, "category": False},
    {"m": 8075, "n": 6450, "category": False},
    {"m": 3283, "n": 8980, "category": True},
    {"m": 3364, "n": 8482, "category": False},
    {"m": 4909, "n": 8302, "category": True},
    {"m": 9332, "n": -2523, "category": True},
    {"m": -8515, "n": 5209, "category": True},
    {"m": -1624, "n": 7640, "category": False},
    {"m": -6463, "n": 2562, "category": True},
    {"m": 7912, "n": 5868, "category": False},
    {"m": -4825, "n": -2173, "category": True},
    {"m": 28876, "n": 30106, "category": False},
    {"m": -929840, "n": 887043, "category": True},
    {"m": 684923, "n": -588038, "category": True},
    {"m": -291411, "n": -299801, "category": True},
    {"m": -905447, "n": -402122, "category": True},
    {"m": 830872, "n": -223425, "category": True},
    {"m": 831033, "n": -753398, "category": True},
    {"m": -575558, "n": 711716, "category": False},
    {"m": -312296, "n": 515492, "category": False},
    {"m": 595308, "n": 963205, "category": False},
    {"m": -770718, "n": -388434, "category": False},
    {"m": 353889, "n": 330806, "category": True},
    {"m": -174566, "n": 613742, "category": False},
    {"m": -884075, "n": 26687, "category": True},
    {"m": 390743, "n": 204874, "category": True},
    {"m": 930615, "n": 86524, "category": True},
    {"m": -84_945_524, "n": 15_427_487, "category": True},
    {"m": 76_038_602, "n": -89_688_904, "category": False},
    {"m": 50_294_214, "n": -65_802_481, "category": True},
    {"m": 83_436_075, "n": 44_248_708, "category": True},
    {"m": 54_031_677, "n": 92_370_464, "category": True},
    {"m": -6_019_575, "n": -1_302_029, "category": True},
    {"m": 86_952_873, "n": -75_470_243, "category": True},
    {"m": -53_215_372, "n": 28_947_490, "category": False},
    {"m": -37_109_442, "n": 75_623_090, "category": False},
    {"m": -11_656_183, "n": 16_147_085, "category": True},
    {"m": 86_439_843, "n": -12_134_914, "category": True},
    {"m": -52_977_427, "n": 48_349_835, "category": True},
    {"m": 16_234_161, "n": 26_103_566, "category": True},
    {"m": 73_756_826, "n": -6_586_797, "category": True},
    {"m": 6_836_355, "n": 11_529_043, "category": True},
    {"m": 29_864_126, "n": -80_782_077, "category": True},
    {"m": 1_646_787_325, "n": 1_961_513_442, "category": True},
    {"m": -1_755_035_190, "n": -1_801_169_490, "category": False},
    {"m": -1_509_018_194, "n": 1_829_751_775, "category": True},
    {"m": -720_160_017, "n": -1_425_309_680, "category": True},
    {"m": 1_216_287_038, "n": 1_821_933_798, "category": False},
    {"m": -1_925_479_607, "n": -1_842_455_762, "category": True},
    {"m": -795_996_486, "n": -1_859_155_567, "category": True},
    {"m": -367_280_505, "n": 321_267_794, "category": True},
    {"m": 829_304_526, "n": -1_575_808_585, "category": True},
    {"m": 1_457_917_042, "n": 1_083_382_210, "category": False},
    {"m": -377_130_535, "n": 1_526_538_188, "category": True},
    {"m": -1_109_347_700, "n": -1_819_333_109, "category": True},
    {"m": -1_740_794_578, "n": 278_770_346, "category": False},
    {"m": 448_156_480, "n": -1_008_775_746, "category": False},
    {"m": 442_691_160, "n": 1_680_572_092, "category": False},
    {"m": 1_241_208_470, "n": -647_438_045, "category": False},
    {"m": 2_147_483_647, "n": -561_158_902, "category": True},
    {"m": 761_395_308, "n": -2_147_483_647, "category": True},
]


def derive(fn: Callable[[int, int], bool]) -> Callable[[], bool]:
    return tests.mn_unique_category_derive(fn, sample, True)


def test_coprimality() -> bool:
    return (
        derive(coprimality.reduce_to_binary_gcd)()
        and derive(coprimality.reduce_to_euclidean)()
    )


def main() -> None:
    test_runner.pick(test_coprimality)


if __name__ == "__main__":
    main()
